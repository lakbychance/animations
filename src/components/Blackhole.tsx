import { useState, useRef, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";

const FluidPath = ({ pathId, speed }: { pathId: string; speed: number }) => {
  const duration = 0.0001 * Math.exp(13.5 - speed);

  return (
    <>
      {/* Orange glow path */}
      <use
        href={`#path-${pathId}`}
        className="stroke-orange-500"
        strokeWidth="30"
      >
        <animate
          attributeName="stroke-dashoffset"
          from="0"
          to="1000"
          dur={`${duration}s`}
          repeatCount="indefinite"
        />
      </use>

      {/* Amber glow path */}
      <use
        href={`#path-${pathId}`}
        className="stroke-amber-800/30"
        strokeWidth="30"
      >
        <animate
          attributeName="stroke-dashoffset"
          from="1000"
          to="2000"
          dur={`${duration}s`}
          repeatCount="indefinite"
        />
      </use>

      {/* Orange fluid path */}
      <use
        href={`#path-${pathId}`}
        className="stroke-orange-300"
        strokeWidth="20"
        strokeDasharray="200 50"
      >
        <animate
          attributeName="stroke-dashoffset"
          from="0"
          to="1000"
          dur={`${duration * 0.4}s`}
          repeatCount="indefinite"
        />
      </use>

      {/* Amber fluid path */}
      <use
        href={`#path-${pathId}`}
        className="stroke-amber-200"
        strokeWidth="10"
        strokeDasharray="200 30"
      >
        <animate
          attributeName="stroke-dashoffset"
          from="1000"
          to="2000"
          dur={`${duration * 0.4}s`}
          repeatCount="indefinite"
        />
      </use>

      {/* Yellow fluid path */}
      <use
        href={`#path-${pathId}`}
        className="stroke-yellow-100/50"
        strokeWidth="10"
        strokeDasharray="75 5"
      >
        <animate
          attributeName="stroke-dashoffset"
          from="500"
          to="1500"
          dur={`${duration * 0.2}s`}
          repeatCount="indefinite"
        />
      </use>
    </>
  );
};

const BlacholeSVG = () => {
  return (
    <div
      style={{
        animation: "zoomIn 20s ease-in forwards",
      }}
      className="w-2/3 md:w-1/2"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="100%"
        viewBox="0 0 1164 874"
      >
        <path
          className="relative"
          fill="none"
          id="path-1"
          d=" M796.000000,516.000000  C796.791138,514.277039 797.868408,513.205811 799.992493,512.939941   C806.679565,512.103027 813.320251,510.900391 820.003052,510.023224   C830.134338,508.693359 840.379333,508.768402 850.531433,507.203857   C856.389099,506.301178 862.545288,506.957245 868.496033,505.976013   C876.296509,504.689789 884.205627,504.124329 892.031555,503.299225   C899.497864,502.512024 906.963989,501.372223 914.492737,500.887054   C922.025879,500.401581 929.508423,499.058838 936.997803,497.984711   C945.840454,496.716492 954.683899,495.437286 963.495972,493.975861   C977.011230,491.734497 990.536926,489.524384 1003.985168,486.923309   C1011.235229,485.521027 1018.259583,482.919342 1025.522339,481.625397   C1031.820190,480.503418 1037.929810,478.731049 1043.963623,476.881470   C1062.424805,471.222473 1081.302246,466.324493 1096.022705,452.524261   C1104.857422,444.241943 1101.440918,435.186890 1094.376099,429.144806   C1086.737671,422.612183 1077.340942,418.792969 1068.044678,414.893433   C1056.313599,409.972443 1044.098877,406.463837 1031.915894,403.326721   C1021.801636,400.722260 1011.385437,398.714050 1001.062134,396.684082   C992.050232,394.911957 982.948914,392.988190 973.936035,391.352356   C963.910645,389.532684 953.679199,388.206207 943.526672,386.806427   C935.350708,385.679138 927.123169,384.540710 918.955261,383.293030   C912.560425,382.316162 906.002991,381.609070 899.496399,381.041321   C887.499939,379.994629 875.918945,377.298340 864.481934,373.555267   C839.447571,365.362152 818.212952,351.315155 800.014771,332.485718   C790.057190,322.182709 782.048645,310.412750 775.034668,297.980438   C769.060852,287.391815 761.687439,277.808807 753.934387,268.554962   C742.354248,254.733139 729.072144,242.634705 714.489685,232.014130   C698.820007,220.601624 681.972534,211.169174 663.943420,204.145187   C653.949829,200.251770 643.583191,197.286530 633.056641,194.763596   C622.439514,192.218933 611.774292,190.283524 600.991150,189.650253   C584.664551,188.691422 568.358521,188.286591 551.952209,190.671158   C543.259033,191.934662 534.510193,193.184128 526.053894,195.223404   C513.731262,198.195099 501.659454,202.333008 489.992859,207.483856   C470.297150,216.179565 452.048889,227.402512 435.622162,241.145996   C416.609467,257.052979 399.830048,275.297058 387.595184,297.053528   C372.751831,323.448608 352.988556,344.991058 326.939392,360.397522   C312.995026,368.644836 297.976013,374.721313 281.990570,377.953339   C275.712372,379.222717 269.462311,380.614227 263.008026,381.105499   C255.972672,381.641022 249.009323,383.072174 241.997147,383.977966   C236.010925,384.751221 229.949814,385.042084 224.011261,386.065308   C214.019073,387.787018 203.956573,389.143463 193.952774,390.695648   C184.971832,392.089172 175.964828,393.650726 167.051270,395.280426   C159.008148,396.750946 150.892426,398.466064 142.910965,400.678864   C137.214340,402.258179 131.318283,403.598480 125.486809,404.942780   C114.184982,407.548126 103.240608,411.195129 92.504967,415.512360   C83.797249,419.014038 75.277725,422.901337 68.006454,429.007690   C60.363548,435.426117 57.711323,444.720062 65.932556,452.570618   C75.426811,461.636749 87.157623,466.368835 99.020180,470.947723   C103.730675,472.765961 108.674156,473.976379 113.498215,475.505646   C120.406075,477.695435 127.515129,479.166168 134.453751,481.160889   C141.748093,483.257935 149.194214,484.563904 156.531830,486.370728   C164.894165,488.429779 173.501831,489.489746 181.999344,491.003662   C187.502823,491.984161 192.982330,493.113342 198.503983,493.974457   C207.656006,495.401764 216.828003,496.704681 226.001312,497.990601   C238.162659,499.695374 250.309982,501.536072 262.506866,502.940247   C273.641083,504.222076 284.833862,504.994232 295.999878,506.001495   C308.655426,507.143097 321.273682,508.593353 333.994843,509.123627   C342.188965,509.465179 350.369873,510.779694 358.479309,512.124695   C361.162598,512.569702 364.779419,512.267761 366.000000,516.000000   C368.000000,518.000000 372.000000,518.000000 376.000000,518.000000   C432.000000,518.000000 488.000000,518.000000 544.000000,518.000000   C600.000000,518.000000 656.000000,518.000000 712.000000,518.000000   C740.000000,518.000000 768.000000,518.000000 796.000000,516.000000 Z"
        />
        {/* <Particles pathId="1" speed={1} /> */}
        <FluidPath pathId="1" speed={1} />
        <path
          fill="none"
          id="path-2"
          d=" M573.500000,218.000000   C568.500000,218.666656 563.514648,219.483475 558.497437,219.973846   C537.526489,222.023514 518.099609,229.067184 499.530273,238.559204   C479.675964,248.708099 462.019531,262.081146 446.605438,278.101440   C433.859131,291.348969 422.670959,305.833008 413.300171,321.883331   C402.101440,341.064575 388.040253,357.993134 369.593536,371.131348   C354.437439,381.925873 338.194824,390.117371 320.480530,395.435181   C311.702789,398.070251 302.669495,399.669403 293.503784,400.539856   C281.155182,401.712616 268.815704,403.023224 256.504730,404.538513   C242.983932,406.202759 229.379562,407.552887 216.033646,410.171539   C202.506668,412.825714 188.849136,414.899323 175.485977,418.447205   C162.793060,421.817078 150.145370,425.127594 138.455856,431.417969   C134.323273,433.641846 130.716537,436.202332 128.001709,440.001221   C124.666695,444.667969 125.154594,447.831268 129.483994,451.518799   C134.471695,455.767029 140.526291,457.925934 146.528091,459.915283   C161.553757,464.895569 177.000275,468.352783 192.508163,471.459259   C201.129379,473.186188 209.832504,474.504791 218.500198,475.998840   C229.166000,477.837219 239.812164,479.803894 250.506973,481.454803   C258.471558,482.684265 266.503296,483.474426 274.499237,484.505981   C286.476105,486.051117 298.489624,487.267181 310.486267,488.621765   C323.643707,490.107391 336.819977,491.291382 349.989899,492.601532   C366.804840,494.274200 383.640350,495.440826 400.491394,496.622589   C423.813782,498.258179 447.150726,499.424988 470.487762,500.720245   C490.329865,501.821533 510.188416,501.510162 529.993408,502.617920   C557.499390,504.156433 585.001160,503.384583 612.500061,503.395569   C633.666138,503.404022 654.822205,502.183685 675.998291,501.881165   C694.173157,501.621552 712.342102,500.488373 730.497681,499.458740   C750.841187,498.305054 771.176392,496.963806 791.496826,495.456818   C806.513123,494.343201 821.514160,492.973694 836.495972,491.460144   C851.181152,489.976593 865.839417,488.218262 880.498108,486.483887   C892.507446,485.062988 904.529114,483.698212 916.491272,481.940552   C927.033020,480.391510 937.449890,477.926178 948.015381,476.624908   C956.945007,475.525177 965.742310,473.691132 974.457336,471.803009   C991.255493,468.163544 1008.094177,464.348785 1023.990356,457.477722   C1027.326416,456.035736 1030.371826,454.088074 1033.015381,451.515778   C1036.865356,447.769653 1037.172729,444.509064 1034.006592,439.995422   C1029.900757,434.142181 1023.833374,431.171295 1017.508118,428.480927   C1006.375732,423.745941 994.822510,420.601135 983.043518,417.815887   C968.624390,414.406372 954.085632,411.894501 939.499878,409.500916   C924.232605,406.995422 908.907776,404.946960 893.502136,403.477356   C882.491089,402.426971 871.384033,401.810669 860.526001,399.855621   C842.261353,396.566956 824.771790,390.810059 808.448792,381.590637   C796.578308,374.886017 785.857727,366.731171 776.076538,357.419617   C764.396790,346.300537 755.483948,333.041443 747.329651,319.099609   C740.490234,307.405823 732.111633,296.662537 723.079407,286.429932   C711.003906,272.749573 697.486511,260.769196 682.451355,250.571701   C668.362732,241.016190 653.349670,233.283096 637.071594,227.787918   C627.649475,224.607193 618.108215,221.837326 608.455688,220.273529   C597.144958,218.441116 585.582825,217.238327 574.000000,218.000000  "
        />
        {/* <Particles pathId="2" speed={2} /> */}
        <FluidPath pathId="2" speed={2} />
        <path
          fill="none"
          id="path-3"
          d=" M600.000000,483.500000   C604.666687,484.316071 609.307861,483.874268 614.005981,483.603912   C620.982910,483.202484 628.004272,483.658417 634.999207,483.470551   C656.834656,482.884064 678.704590,482.732300 700.484741,481.272003   C712.157471,480.489380 723.875244,480.672729 735.493774,479.441376   C756.132690,477.253998 776.882202,476.531616 797.522400,474.198395   C810.170593,472.768616 822.879395,471.521423 835.466614,469.761383   C845.678955,468.333405 855.903931,466.438538 866.059448,464.279510   C876.042175,462.157196 885.880737,459.772400 895.466309,456.404022   C898.954834,455.178131 902.409424,453.537781 905.045959,450.540405   C908.230347,446.920044 908.548340,444.885284 904.953491,441.550171   C901.160034,438.030884 896.343201,436.088135 891.486450,434.542572   C879.397461,430.695404 867.124573,427.740631 854.514832,425.898285   C829.492065,422.242310 805.546204,414.902100 784.582275,400.381226   C764.072693,386.175171 747.792419,368.137482 735.244873,346.145569   C718.845032,317.401764 696.182373,294.064545 667.495911,277.006836   C652.488037,268.082764 636.444397,261.755341 619.518372,257.428070   C607.172058,254.271622 594.549377,252.983521 581.995361,252.744965   C567.013794,252.460266 551.996765,254.525146 537.532166,258.613739   C516.904785,264.444366 497.836609,273.735687 480.483154,286.477081   C458.695496,302.474182 440.893738,322.014465 427.516754,345.509521   C414.245178,368.819489 396.868317,388.226440 373.999695,402.499512   C358.814301,411.977264 342.524109,418.819641 324.988983,422.446808   C314.715973,424.571808 304.214630,425.674896 294.032074,428.132904   C282.977936,430.801270 271.624207,432.810486 261.504852,438.508636   C260.136230,439.279297 258.672638,439.990173 257.528900,441.031738   C253.410370,444.782318 253.406555,447.266693 257.511871,450.986877   C263.054840,456.009766 270.134155,457.879578 277.016846,459.943817   C288.307098,463.329926 299.911591,465.490112 311.515503,467.406189   C324.113861,469.486481 336.832336,470.841003 349.500275,472.497864   C361.956757,474.127045 374.466888,475.127655 386.986267,476.165527   C397.652802,477.049805 408.347717,477.574677 418.990204,478.601624   C431.646606,479.822845 444.357788,479.646271 456.986237,480.669800   C466.329529,481.427032 475.644135,481.816895 484.999146,482.036041   C508.835022,482.594391 532.664001,483.463898 556.501038,483.949554   C570.162048,484.227905 583.833313,484.004364 597.500000,483.987152   C598.183289,483.986298 598.997192,484.321991 599.500000,483.500000  "
        />
        {/* <Particles pathId="3" speed={3} /> */}
        <FluidPath pathId="3" speed={3} />

        <path
          fill="none"
          id="path-4"
          d=" M630.000000,469.500000   C639.500000,469.500000 649.080444,470.262024 658.475708,469.269958   C666.669006,468.404816 674.870483,468.283081 683.001953,468.204376   C699.729675,468.042480 716.315674,466.048187 732.994446,465.364136   C743.857300,464.918549 754.769836,463.746796 765.472290,461.844208   C777.235779,459.753082 789.255798,458.511902 800.498535,453.996338   C802.508911,453.188873 804.662170,452.591583 806.471924,451.455322   C814.303223,446.538300 813.896790,440.321655 805.492920,436.013763   C797.044495,431.683014 787.943359,429.004852 778.982300,426.053741   C750.711731,416.743500 727.617432,401.367432 713.301086,374.104462   C707.068848,362.236084 701.069397,350.100403 692.568787,339.445099   C679.701721,323.316345 663.872192,311.121765 645.507751,301.984467   C637.478333,297.989349 629.083374,294.911407 620.477112,292.584656   C609.545166,289.629120 598.382812,287.822083 587.001099,287.464417   C574.735229,287.078918 562.481995,287.701721 550.533569,290.163025   C537.119812,292.926178 524.145081,297.431946 511.997650,303.995636   C494.683441,313.351227 479.614258,325.428680 467.529480,341.022858   C460.718811,349.811310 455.580139,359.718079 450.645264,369.572723   C439.816803,391.196503 423.903992,407.614044 402.433014,418.366272   C392.462677,423.359222 381.615265,426.470184 371.021881,430.064514   C364.597046,432.244446 357.918060,433.996521 352.486053,438.483124   C348.432800,441.830994 348.364471,446.289062 352.502686,449.496521   C358.841919,454.410034 366.587097,455.906189 374.029175,457.890564   C380.388153,459.586182 386.965454,460.605164 393.508087,461.436249   C403.310303,462.681427 413.206757,463.211151 422.990326,464.569763   C436.609955,466.461090 450.395996,465.466095 464.013489,467.405243   C469.264099,468.152924 474.666168,467.851288 480.000092,467.996948   C504.666565,468.670563 529.329834,469.575287 554.001038,469.929443   C576.996277,470.259552 600.000732,470.079285 622.998779,469.867401   C625.109314,469.847961 627.441589,471.073730 629.500000,469.500000  "
        />
        {/* <Particles pathId="4" speed={4} /> */}
        <FluidPath pathId="4" speed={4} />
        <path
          fill="none"
          id="path-5"
          d=" M693.500000,415.500000   C688.642090,406.881287 686.193298,397.246826 681.642212,388.426605   C667.224731,360.484924 645.106262,341.965637 615.504333,331.987122   C601.851379,327.384888 587.741943,325.504822 573.510803,326.635590   C548.935181,328.588287 527.015137,337.370087 507.925079,353.410828   C492.598480,366.289276 482.250580,382.428345 474.618591,400.549957   C473.563965,403.054077 472.428986,405.810760 472.092407,408.511505   C470.317596,422.752014 460.402893,429.254883 448.496979,433.992432   C446.685242,434.713379 444.792664,435.240570 443.009796,436.022369   C440.515045,437.116394 439.791779,438.984894 440.741425,441.167053   C451.416290,444.955811 462.322021,444.121857 473.009216,444.867859   C485.803497,445.760925 498.665955,445.918427 511.500122,445.954132   C554.833130,446.074585 598.166748,446.038788 641.499939,445.977081   C655.000183,445.957825 668.546143,446.287750 681.984314,445.289154   C691.486023,444.583130 701.050537,444.779938 710.492126,443.444366   C713.920593,442.959381 717.259033,441.837860 720.717346,440.987396   C720.362549,435.302185 715.167053,435.476318 712.424255,433.086945   C709.308594,430.372742 705.896973,427.981140 703.007263,424.993011   C699.974976,421.857513 697.000000,418.666656 694.000000,415.500000  "
        />
        {/* <Particles pathId="5" speed={5} /> */}
        <FluidPath pathId="5" speed={5} />

        <path
          fill="none"
          id="path-12"
          d=" M367.000000,517.000000 C380.803375,524.200439 388.892761,536.838318 397.507538,548.994629   C414.845184,573.459961 436.510803,593.315002 462.016937,608.972412   C479.071167,619.441589 497.100922,627.590698 516.430420,633.238159   C527.529663,636.481018 538.731995,639.234924 550.036499,640.722412   C563.219421,642.457031 576.651672,644.372131 589.979919,642.826599   C599.821960,641.685303 609.702759,640.920654 619.542908,639.253174   C644.166138,635.080505 667.191772,627.088257 689.052063,615.094910   C702.942383,607.474060 716.017578,598.862122 728.023865,588.527710   C745.601685,573.397644 760.725220,556.244995 773.105530,536.566406   C778.425781,528.109863 786.544250,522.233704 795.000000,517.000000  "
        />
        {/* <Particles pathId="12" speed={5} /> */}
        <FluidPath pathId="12" speed={5} />
        <path
          fill="none"
          id="path-6"
          d=" M411.500000,516.500000   C411.666656,516.833313 411.744049,517.296509 412.012848,517.481323   C423.087982,525.097595 429.038208,537.140808 437.418335,547.068909   C450.267914,562.292114 465.101379,575.002502 481.963562,585.558228   C495.640076,594.119751 510.387360,600.354126 525.585571,605.233521   C533.048096,607.629395 541.055359,608.954163 548.945007,610.318054   C559.785034,612.191895 570.651794,613.408142 581.498901,613.334900   C614.235046,613.114075 645.347839,605.344971 673.917786,589.353149   C698.715027,575.473145 719.571594,556.778015 735.441162,532.960815   C738.876465,527.805237 742.766785,523.287842 748.020325,520.032837   C749.431946,519.158203 750.075378,517.958618 750.500000,516.500000  "
        />
        {/* <Particles pathId="6" speed={6} /> */}
        <FluidPath pathId="6" speed={6} />
        <path
          fill="none"
          id="path-7"
          d=" M450.000000,518.000000   C450.333344,518.500000 450.567719,519.123108 451.014374,519.482117   C465.061157,530.772949 474.468018,546.694641 488.996582,557.504578   C502.315216,567.414368 516.754761,575.144958 532.489685,580.530090   C553.985413,587.886719 576.122742,589.739441 598.485596,587.364319   C623.342834,584.724426 646.346252,576.251770 666.966248,561.951294   C677.802673,554.435974 687.564453,545.693665 695.560913,535.045715   C699.317810,530.043152 704.502441,526.255859 708.775024,521.785034   C715.281982,514.976074 723.387207,515.929443 731.020935,515.228027   C737.409119,514.641113 743.971924,514.806824 750.544739,515.652344   C754.526184,516.164612 759.173523,514.587463 763.463379,513.800293   C767.019043,513.147827 770.501160,512.898071 773.996704,513.067871   C779.561035,513.338196 784.996826,512.283508 790.499512,511.990417   C792.784546,511.868744 794.900085,512.133179 796.500000,514.000000  "
        />
        {/* <Particles pathId="7" speed={1} /> */}
        <FluidPath pathId="7" speed={1} />
        <path
          fill="none"
          id="path-8"
          d=" M478.500000,518.500000   C483.349274,527.682129 491.251556,534.054077 499.032104,540.460999   C508.109833,547.936035 518.047485,553.981323 528.959045,558.596863   C540.893921,563.645142 553.114624,566.915405 565.977234,568.666992   C578.782837,570.410767 591.466797,569.810364 603.965515,567.786987   C616.304077,565.789612 628.229248,561.760742 639.523560,556.046570   C655.644287,547.890625 669.711975,537.177673 681.447510,523.455139   C682.565247,522.148132 684.310547,520.757568 683.500000,518.500000  "
        />
        {/* <Particles pathId="8" speed={8} /> */}
        <FluidPath pathId="8" speed={8} />
        <path
          fill="none"
          id="path-9"
          d=" M504.500000,519.500000   C504.881622,521.115662 505.771240,522.401123 506.995972,523.504456   C520.044373,535.260376 535.378540,543.264038 552.072327,547.729675   C566.460938,551.578735 581.454346,552.747742 596.506653,550.545532   C618.985535,547.256836 638.589905,537.838989 655.997681,523.497192   C657.270325,522.448792 658.118408,521.115662 658.500000,519.500000  "
        />
        {/* <Particles pathId="9" speed={9} /> */}
        <FluidPath pathId="9" speed={9} />
      </svg>
    </div>
  );
};

export const Blackhole = () => {
  const [isPlaying, setIsPlaying] = useState(false);
  const audioRef = useRef<HTMLAudioElement | null>(null);

  useEffect(() => {
    audioRef.current = new Audio("/blackhole.mp3");
  }, []);

  const handlePlay = () => {
    setIsPlaying(true);
    audioRef.current?.play();
  };

  return (
    <div className="flex contain-strict flex-col perspective-dramatic justify-center items-center h-screen w-full bg-[#08090a]">
      <AnimatePresence>
        {!isPlaying && (
          <motion.button
            onClick={handlePlay}
            className="absolute z-50 flex items-center justify-center w-20 h-20 text-white/50 hover:text-white/80"
            initial={{ opacity: 0, filter: "blur(4px)", scale: 0.8 }}
            animate={{ opacity: 1, filter: "blur(0px)", scale: 1 }}
            exit={{
              opacity: 0,
              filter: "blur(4px)",
              scale: 0.8,
              transition: { duration: 0.25, type: "easeOut" },
            }}
            transition={{ duration: 1, type: "easeIn" }}
          >
            <motion.svg
              xmlns="http://www.w3.org/2000/svg"
              width="48"
              height="48"
              fill="none"
              stroke="currentColor"
              strokeWidth="2"
              whileHover={{ scale: 1.1 }}
              whileTap={{ scale: 0.95 }}
            >
              <circle cx="24" cy="24" r="22" />
              <path d="M20 16l12 8-12 8z" />
            </motion.svg>
          </motion.button>
        )}
      </AnimatePresence>

      <style>{`
        @keyframes move {
          0% {
            offset-distance: 0%;
          }
          100% {
            offset-distance: 100%;
          }
        }
        @keyframes zoomIn {
          0% {
            transform: translateZ(75px) rotate(0deg) rotateX(50deg) rotateY(-10deg);
            filter: blur(10px);
          }
          100% {
            transform: translateZ(-20px) rotate(20deg) rotateX(0deg) rotateY(0deg);
            filter: blur(3px);
          }
        }
        @media (max-width: 768px) {
          @keyframes zoomIn {
            0% {
              transform: translateZ(75px) rotate(0deg) rotateX(50deg) rotateY(-10deg);
              filter: blur(5px);
            }
            100% {
              transform: translateZ(30px) rotate(10deg) rotateX(0deg) rotateY(0deg);
              filter: blur(1px);
            }
          }
        }
      `}</style>
      {isPlaying && <BlacholeSVG />}
    </div>
  );
};
